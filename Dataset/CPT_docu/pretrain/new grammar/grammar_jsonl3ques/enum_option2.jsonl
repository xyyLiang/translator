{"text": "QUESTION:In Cangjie code language,How is the Option type defined in Cangjie?\nANSWER:The Option type in Cangjie is defined as a generic enum with two constructors: Some(T) and None. The Some constructor carries a value of type T, indicating the presence of a value, while None indicates the absence of a value. The Option type is used to represent a value that may or may not be present.\nWhen T is instantiated into different types, different Option types will be obtained, such as Option<Int64>, Option, <String>etc.enum Option<T> {\n    | Some(T)\n    | None\n}"}
{"text": "QUESTION:In Cangjie code language,What is the syntax for the Option type in Cangjie?\nANSWER:There is also a simple way to write the Option type: add ?before the type name. That is, for any type of ty, ? Ty is equivalent to Option<Ty>. For example? Int64 is equivalent to Option<Int64>, ? String is equivalent to Option<String>, and so on.let a: Option<Int64> = Some(100)\nlet b: ?Int64 = Some(100)\nlet c: Option<String> = Some(\"Hello\")\nlet d: ?String = None"}
{"text": "QUESTION:In Cangjie code language,How is the Option type used in Cangjie?\nANSWER:When a value of type T is required in a context that expects an Option<T>, the compiler automatically wraps the value using the Some constructor. This is not a type conversion but rather an implicit wrapping of the value.let a: Option<Int64> = 42 // Equivalent to Some(42)\nlet b: Option<String> = \"Hello\" // Equivalent to Some(\"Hello\")"}
{"text": "QUESTION:In Cangjie code language,How are None values constructed in Cangjie?\nANSWER:When the context does not explicitly specify the type, None cannot be used directly to construct an Option<T> value. Instead, the type must be specified explicitly using None<T>.let a = None<Int64> // a: Option<Int64>\nlet b = None<Bool> // b: Option<Bool>"}
{"text": "QUESTION:In Cangjie code language,How is the Option type used for error handling in Cangjie?\nANSWER:The Option type in Cangjie can be used to represent the presence or absence of a value, which can also be interpreted as a form of error handling. The Option type has two constructors: Some(T) for a value of type T, and None for no value. This can be useful in scenarios where a function might fail to produce a value.func getOrThrow(a: ?Int64) {\n    match (a) {\n        case Some(v) => v\n        case None => throw NoneValueException()\n    }\n}"}
{"text": "QUESTION:In Cangjie code language,How is pattern matching used with Option in Cangjie?\nANSWER:Pattern matching is a powerful way to handle Option values in Cangjie. It allows you to destructure the Option type and handle both Some and None cases explicitly.func getString(p: ?Int64): String{\n    match (p) {\n        case Some(x) => \"${x}\"\n        case None => \"none\"\n    }\n}\nmain() {\n    let a = Some(1)\n    let b: ?Int64 = None\n    let r1 = getString(a)\n    let r2 = getString(b)\n    println(r1) //output：1\n    println(r2) //output：none\n}"}
{"text": "QUESTION:In Cangjie code language,How does the coalescing operator (??) work with Option in Cangjie?\nANSWER:The coalescing operator ?? is used to provide a default value when an Option value is None. For an expression e1 ?? e2, if e1 is Some(v), it returns v; otherwise, it returns e2.main() {\n    let a = Some(1)\n    let b: ?Int64 = None\n    let r1: Int64 = a ?? 0\n    let r2: Int64 = b ?? 0\n    println(r1) // Output: 1\n    println(r2) // Output: 0\n}"}
{"text": "QUESTION:In Cangjie code language,How does the Elvis operator (?) work with Option in Cangjie?\nANSWER:The Elvis operator ? is used to safely access members of an Option value. It allows you to chain accesses and handle None gracefully. For example, e?.b will return Some(v.b) if e is Some(v), otherwise it returns None.struct R {\n    public var a: Int64\n    public init(a: Int64) {\n        this.a = a\n    }\n}\nlet r = R(100)\nlet x = Some(r)\nlet y = Option<R>.None\nlet r1 = x?.a   // r1 = Option<Int64>.Some(100)\nlet r2 = y?.a   // r2 = Option<Int64>.None"}
{"text": "QUESTION:In Cangjie code language,How does multi-level access work with Option in Cangjie?\nANSWER:The Elvis operator ? supports multi-level access, allowing you to chain accesses safely. For example, a?.b.c?.d will return Some(vc.d) if a is Some(va) and va.b.c is Some(vc), otherwise it returns None.struct A {\n    let b: B = B()\n}\nstruct B {\n    let c: Option<C> = C()\n    let c1: Option<C> = Option<C>.None\n}\nstruct C {\n    let d: Int64 = 100\n}\n\nlet a = Some(A())\nlet a1 = a?.b.c?.d // a1 = Option<Int64>.Some(100)\nlet a2 = a?.b.c1?.d // a2 = Option<Int64>.None"}
{"text": "QUESTION:In Cangjie code language,How does the getOrThrow function work with Option in Cangjie?\nANSWER:The getOrThrow function is used to extract the value from an Option type. If the value is Some(v), it returns v; otherwise, it throws an exception.main() {\n    let a = Some(1)\n    let b: ?Int64 = None\n    let r1 = a.getOrThrow()\n    println(r1) // Output:1\n    try {\n        let r2 = b.getOrThrow()\n    } catch (e: NoneValueException) {\n        println(\"b is None\") // Output:b is None\n    }\n}"}
