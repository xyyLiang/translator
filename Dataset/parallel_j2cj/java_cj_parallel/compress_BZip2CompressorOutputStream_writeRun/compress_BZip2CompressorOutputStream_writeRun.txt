    /**
     * Writes the current byte to the buffer, run-length encoding it if it has been repeated at least four times (the first step RLEs sequences of four
     * identical bytes).
     *
     * <p>
     * Flushes the current block before writing data if it is full.
     * </p>
     *
     * <p>
     * "write to the buffer" means adding to data.buffer starting two steps "after" this.last - initially starting at index 1 (not 0) - and updating this.last
     * to point to the last index written minus 1.
     * </p>
     */